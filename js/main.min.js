require(["config"],function(){require(["app"],function(){function e(){l++;var e=Math.round(2*Math.random())+1,n=Math.round(100*Math.random()),o=Math.round(80*Math.random());$("#hero_intro").prepend('<span class="flash'+e+'" rel="f_'+l+'" style="top:'+o+"%;left:"+n+'%;"></span>');var a=$('span[rel="f_'+l+'"]');setTimeout(function(){a.remove()},500)}function n(e,n){if(e.error)return $("#leaderboard .content ."+n+" span").html("Error fetching data"),!1;var l="<ol>";$.each(e.top_scores,function(e,n){var o="";o=null!=n.facebook_id?"<span class='fb_pic' data-id='"+n.facebook_id+"'></span>":"<img src='images/meta/apple-touch-icon-60x60.png' width='30' height='30' />";var a=null!=n.name?n.name:"Unknown";return l+=e>=3?"<li class='hide'><span class='name'>"+o+a+"</span> <span class='right'>"+n.score+"</span></li>":"<li><span class='name'>"+o+a+"</span> <span class='right'>"+n.score+"</span></li>",11==e?!1:void 0}),l+="</ol>",l+='<a href="#" data-ref="'+n+'" class="show_more">VIEW MORE</a><a href="#" class="go_back" >GO BACK</a>',$l=$(l),$l.find(".fb_pic").each(function(){var e=$(this);FB.api("/"+e.data("id")+"/picture",{redirect:!1,height:"60",type:"normal",width:"60"},function(n){n&&!n.error&&e.replaceWith("<img src='"+n.data.url+"' width='30' height='30' />")})}),$("#leaderboard .content ."+n+" span").replaceWith($l)}require(["src/binds","src/sliders","src/characters"]),$("#chars, #stage, #intro .train.left-train").addClass("animate"),setInterval(e,700),setInterval(e,500),setInterval(e,900),setInterval(e,1100);var l=0;$(window).scroll(function(){$(".mountain_bg").css("transform","translate(0px,"+$(window).scrollTop()/2+"px)")}),window.im_a_train=function(e){"caaage"==e?$(".train span").first().append('<img src="http://ih2.redbubble.net/image.14928045.9401/sticker,375x360.u6.png" style="float:right;margin-top:-80px;margin-right:-100px;"/>'):$(".train span").html(e)},$("body").on("click","[data-analytics]",function(){var e=$(this).data("analytics");_gaq.push(["_trackEvent",e[0],e[1],e[2]])}),data=$.parseJSON('{"top_scores":[{"name":"Sergio Milán","facebook_id":null,"score":"3299"},{"name":"Harunchai Paecharoenchai","facebook_id":null,"score":"2950"},{"name":"Julius Vetämäjärvi","facebook_id":"10204417397067101","score":"2763"},{"name":"Колмогоров","facebook_id":null,"score":"2668"},{"name":null,"facebook_id":null,"score":"2665"},{"name":null,"facebook_id":null,"score":"2634"},{"name":null,"facebook_id":null,"score":"2565"},{"name":null,"facebook_id":null,"score":"2564"},{"name":null,"facebook_id":null,"score":"2530"},{"name":null,"facebook_id":null,"score":"2500"},{"name":null,"facebook_id":null,"score":"2488"},{"name":null,"facebook_id":null,"score":"2463"},{"name":null,"facebook_id":null,"score":"2461"},{"name":null,"facebook_id":null,"score":"2456"},{"name":null,"facebook_id":null,"score":"2452"},{"name":null,"facebook_id":null,"score":"2411"},{"name":null,"facebook_id":null,"score":"2400"},{"name":null,"facebook_id":null,"score":"2395"},{"name":null,"facebook_id":null,"score":"2378"},{"name":null,"facebook_id":null,"score":"2368"},{"name":null,"facebook_id":null,"score":"2355"},{"name":null,"facebook_id":null,"score":"2353"},{"name":null,"facebook_id":null,"score":"2350"},{"name":null,"facebook_id":null,"score":"2348"},{"name":null,"facebook_id":null,"score":"2341"},{"name":null,"facebook_id":null,"score":"2323"},{"name":null,"facebook_id":null,"score":"2318"},{"name":"Patrick Trethowan","facebook_id":"10154692830720167","score":"2314"},{"name":null,"facebook_id":null,"score":"2310"},{"name":null,"facebook_id":null,"score":"2301"},{"name":null,"facebook_id":null,"score":"2300"},{"name":null,"facebook_id":null,"score":"2298"},{"name":null,"facebook_id":null,"score":"2287"},{"name":null,"facebook_id":null,"score":"2273"},{"name":null,"facebook_id":null,"score":"2270"},{"name":null,"facebook_id":null,"score":"2269"},{"name":null,"facebook_id":null,"score":"2265"},{"name":null,"facebook_id":null,"score":"2261"},{"name":null,"facebook_id":null,"score":"2261"},{"name":null,"facebook_id":null,"score":"2261"},{"name":null,"facebook_id":null,"score":"2261"},{"name":null,"facebook_id":null,"score":"2259"},{"name":null,"facebook_id":null,"score":"2252"},{"name":"Nicolás Pombo","facebook_id":"10204490688740231","score":"2251"},{"name":null,"facebook_id":null,"score":"2245"},{"name":null,"facebook_id":null,"score":"2244"},{"name":null,"facebook_id":null,"score":"2233"},{"name":null,"facebook_id":null,"score":"2218"},{"name":null,"facebook_id":null,"score":"2213"},{"name":null,"facebook_id":null,"score":"2209"}]}'),w=window.location.href,leaders=w.indexOf("?leaders")>0?!0:!1,leaders&&($(".leaders").not(".big").show(),$("#leaderboard .coming_soon").hide(),"undefined"!=typeof freezerville?n(freezerville,"freezerville"):n({error:!0},"freezerville"),"undefined"!=typeof drowntown?n(drowntown,"drowntown"):n({error:!0},"drowntown"),"undefined"!=typeof dumbest?n(dumbest,"dumbest"):n({error:!0},"dumbest"),"undefined"!=typeof dumbdome?n(dumbdome,"dumbdome"):n({error:!0},"dumbdome")),$(document).on("click","#leaderboard a.show_more",function(e){e.preventDefault(),$(".leaders").not(".big").fadeOut("fast"),$(".leaders.big").html($("."+$(this).data("ref")).html()).slideDown("slow",function(){})}),$(document).on("click","#leaderboard a.go_back",function(e){e.preventDefault(),$(".leaders.big").slideUp("slow",function(){$(".leaders").not(".big").fadeIn("fast")})})})});